<html>
<head>
<link rel="shortcut icon" type="image/png" href="img/star-ico.png?"/>
<meta http-equiv="Content-Language" content="zh-tw">
<meta charset="UTF-8">
<title>紫微斗數</title>
<link rel="stylesheet" type="text/css" href="js/ziwei.css">
<script src="js/lunar.js" type="text/javascript"></script>
<script src="js/ziweistar.js" type="text/javascript"></script>
<script src="js/ziweicore.js" type="text/javascript"></script>
<script src="js/ziweiui.js" type="text/javascript"></script>
</head>
<body>
	<div class="zwDivHeader">
		<h2>紫微斗數排盤</h2>
		<div>
			西元 <select id="sel_Year"></select> 年
			<select id="sel_Month"></select> 月
			<select id="sel_Day"></select> 日
			<select id="sel_Hour"></select> 時
			<input type="radio" name="gender" value="M" checked>男
			<input type="radio" name="gender" value="F">女
			<input type="button" id="btn-gen" value="排盤">
		</div>
	</div>
	<div class="zwDivHeader">
		<h2>基本資訊</h2>
		<div class="basic-info">
			<div>國曆：<span id="solar-info"></span></div>
			<div>農曆：<span id="lunar-info"></span></div>
			<div>生肖：<span id="zodiac-info"></span></div>
			<div>五行局：<span id="fiveElement-info"></span></div>
			<div>陰陽性別：<span id="genderType-info"></span></div>
		</div>
	</div>
	
	<div class="zwDivHeader">
		<h2>主星的分析</h2>
	</div>	
	<div class="chat-info">
		<div class="chat-info-grid">
			<div class="chat-message warning">
				<div class="title">A. 命宮與福德宮主星的基本分析</div>
				<div id="mingfu-analysis" class="content"></div>
			</div>
			
			<div class="chat-message warning">
				<div class="title">B. 四化星分析</div>
				<div class="content" id="sihua-analysis"></div>
			</div>
			
			<div class="chat-message warning">
				<div class="title">C. 命宮三方四正總格局分析</div>
				<div class="content" id="geju-analysis"></div>
			</div>
			
			<div class="chat-message warning">
				<div class="title">D. 命宮三方四正六吉星和六煞星分析</div>
				<div class="content" id="liuji-analysis"></div>
			</div>
			
			<div class="chat-message warning">
				<div class="title">E. 紫微斗數的特殊格局分析</div>
				<div class="content" id="special-analysis"></div>
			</div>
			
			<div class="chat-message warning">
				<div class="title">F. 工作能力分析</div>
				<div class="content" id="work-analysis"></div>
			</div>
			
			<div class="chat-message warning">
				<div class="title">G. 貼心小建議</div>
				<div class="content" id="suggestions"></div>
			</div>
		</div>
	</div>

	<div class="zwDivHeader">
		<br>
		<h2>主星的分布</h2>
	</div>
	<table id="star-table" class="ziwei-table">
		<thead>
			<tr>
				<th>天干地支</th>
				<th>十二宮</th>
				<th>主星</th>
				<th>四化星</th>
				<th>六吉星</th>
				<th>六凶星</th>
				<th>輔助星</th>
			</tr>
		</thead>
		<tbody id="star-table-body">
		</tbody>
	</table>

	<div id="container">
		<div class="ziwei">
			<div class="zwDivCenter">
				<div id="basicInfo">
					國曆：2025 年 6 月 7 日亥 時<br>
					農曆：乙巳 年 5 月 12 日 亥 時<br>
					生肖：蛇<br>
					五行局：木三局<br>
					陰陽性別：陰男
				</div>
			</div>
		</div>
	</div>
	<div id="star-analysis-text" style="display:none;">
		【命宮】紫微：領導格局強，自尊心高...
		【命宮】天機：聰明靈活反應快...
	</div>

	<script>

	// 等待所有JS載入完成
	document.addEventListener('DOMContentLoaded', function() {
		// 命宮與福德宮分析數據
		console.log('開始獲取命宮福德宮分析(addEventListener)...');
		// 監聽排盤按鈕點擊
		document.getElementById('btn-gen').addEventListener('click', async function() {
			const btn = this;
			const originalText = btn.value;
			
			console.log('排盤按鈕點擊 ziweiUI.initial');
			//開始使用
			ziweiUI.initial();
			document.querySelector("input[type=button]").addEventListener('click',async function () {
				try {
					console.log('genZiwei');
					await ziweiUI.genZiwei();
				} catch (e) {
				} finally {
					console.groupEnd();
				}
			});
		});
		console.log('排盤按鈕事件監聽器已設定');
	})
	</script>
</body>
</html>
